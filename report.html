<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Report an Issue | SevaSangam</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header class="header">
    <div class="container header-flex">
  
      <div class="brand">
        <img src="logo.png" alt="SevaSangam Logo">
        <span>SevaSangam</span>
      </div>
  

  </header>

<div class="container">

  <!-- LOGIN STEP -->
<!-- ================= LOGIN STEP ================= -->
<div id="loginBox" class="card">
  <h2>Login to Continue</h2>
  <p>Enter your mobile number to report an issue.</p>

  <input
    type="text"
    id="phoneInput"
    placeholder="Enter 10-digit mobile number"
  />

  <div id="phoneError" class="login-error hidden">
    Please enter a valid 10-digit mobile number.
  </div>

  <button class="btn-primary" onclick="loginUser()">
    Continue
  </button>
</div>

<!-- ================= REPORT STEP ================= -->
<div id="reportBox" class="card hidden">
  <h2>Report an Issue</h2>

  <input type="text" id="issue" placeholder="Issue title" required />
  <input type="text" id="location" placeholder="Location" required />
  <input type="date" id="date" required />

  <input type="email" id="email" placeholder="Email (optional)" />
  <textarea id="support" placeholder="How can you help? (optional)"></textarea>

  <div id="reportError" class="login-error hidden">
    Please fill all required fields correctly.
  </div>

  <label style="margin-top:12px; display:block;">
    Attach Image (optional)
  </label>
  
  <input
    type="file"
    id="reportImage"
    accept="image/*"
  />
  
  <img
    id="imagePreview"
    class="hidden"
    style="margin-top:10px; max-width:100%; border-radius:8px;"
  />
  
  <button class="btn-primary" onclick="submitReport()">
    Submit Report
  </button>
</div>


</div>

<script src="report.js"></script>

<script>
  const dateInput = document.getElementById("date");

  function localDateString(offsetDays = 0) {
    const d = new Date();
    d.setDate(d.getDate() + offsetDays);
    const y = d.getFullYear();
    const m = String(d.getMonth() + 1).padStart(2, "0");
    const day = String(d.getDate()).padStart(2, "0");
    return `${y}-${m}-${day}`;
  }

  dateInput.max = localDateString(0);   // today
  dateInput.min = localDateString(-7);  // last 7 days
</script>




</body>
</html>
